## Описание проекта

Веб‑приложение для регистрации клиентов и расчета их скоринга на основе набора правил:
оператор сотовой связи по номеру телефона, домен электронной почты, уровень образования и
согласие на обработку персональных данных. Скоринг фиксируется при регистрации, доступен в списке
и карточке клиента, а также пересчитывается через консольную команду с режимами “все клиенты” и “по id”.

## Основные возможности

- **Регистрация клиента через форму**: имя, фамилия, российский номер телефона, e‑mail, образование (дропдаун),
  чекбокс согласия на обработку персональных данных. При сохранении считается и сохраняется скоринг с
  детализацией правил.

- **Управление клиентами администратором**: список с пагинацией, просмотр и редактирование карточки клиента;

- **Консольная команда для пересчета скоринга**: режимы “все” и “по id”. В режиме "все" печатается 
актуальный скоринг клиентов, в режиме "по id" печатается детализация скоринга по правилам.

## Правила скоринга

- **Оператор (по номеру телефона):** МегаФон - 10, Билайн - 5, МТС - 3, иной - 1;

- **Домен e‑mail:** gmail.com - 10, yandex.ru - 8, mail.ru - 6, иной - 3;

- **Образование:** высшее - 15, специальное - 10, среднее - 5;

- **Согласие на обработку персональных данных:** отмечено - 4, не отмечено - 0;

## Запуск проекта

1. Создайте файлы окружения и заполните их:
    - `project/.env.local` - [переменные для контейнеров](docs%2Fenv_param.md)
    - `.env.local` - [переменные для проекта](project%2Fdocs%2Fenv_param.md).
2. Выполнить команду `bin/up` - запуск docker-compose
3. Выполнить команду `bin/init` - подготовка пространства проекта (установка зависимостей, создание бд и т.д.)

## Консольные команды

1. `bin/app app:create-admin-user <email> <password>` - создание администратора для возможности входа в админку. 
Передаваемые параметры: email и пароль
2. `bin/app app:client-scoring [<id>]` - пересчет скоринга. Два режима работы:
   - Параметр id клиента. Расчет по одному клиенту,
   - Без параметров. Расчет по всем клиентам;

## Доступ в админку

- **URL:** /admin.
- **Авторизация:** e‑mail и пароль администратора
- **Создать администратора:** `bin/app app:create-admin-user <email> <password>`.

## Запуск тестирования

1. Выполнить команду `bin/tests-init` - подготовка пространства для тестирования
2. Выполнить команду `bin/tests` - запуск тестирования

## Изменения расчета скоринга

Для изменения баллов, либо добавления новых пунктов в текущие правила отредактируйте файл
`project/config/app/scoring_rules.yaml`. Для изменения скоринга у зарегистрированных клиентов под новые правила 
запустить команду `bin/app  app:client-scoring`

## Прочие консольные команды

- `bin/app` - запуск консольной команды;
- `bin/composer` - запуск composer;
- `bin/down` - остановка docker-compose;
- `bin/entity` - запуск консольной команды для работы с сущностями;
- `bin/mg` - применение миграций;
- `bin/mg-diff` - создание миграции;
- `bin/mg-down` - откат указанной миграции;
- `bin/mg-up` - применение указанной миграции;
